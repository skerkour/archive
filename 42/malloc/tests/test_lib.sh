# **************************************************************************** #
#                                                                              #
#                                                         :::      ::::::::    #
#    test_lib.sh                                        :+:      :+:    :+:    #
#                                                     +:+ +:+         +:+      #
#    By: skerkour <marvin@42.fr>                    +#+  +:+       +#+         #
#                                                 +#+#+#+#+#+   +#+            #
#    Created: 2017/09/26 17:16:13 by skerkour          #+#    #+#              #
#    Updated: 2017/09/28 14:41:13 by skerkour         ###   ########.fr        #
#                                                                              #
# **************************************************************************** #

tmpDir="tmp"

make -C .. re
mkdir -p $tmpDir && cd $tmpDir
cp ../../libft_malloc.so .
cp ../../libft_malloc_x86_64_Darwin.so .
cp ../../malloc.h .
cp ../*.c .
cp ../run.sh .
cp /usr/bin/time .

make -C ../.. fclean

gcc test0.c -o test0
gcc test1.c -o test1
gcc test2.c -o test2
gcc test3.c -o test3
gcc test3b.c -o test3b
gcc test4.c -o test4
gcc test5.c -o test5 -L. -lft_malloc 
gcc test6.c -o test6


echo "\033[33m*****************************************************\033[0m";
echo "\033[33m* test0                                             *\033[0m";
echo "\033[33m*****************************************************\033[0m";
./time -l ./test0
echo "\033[33m*****************\033[0m";
./run.sh ./time -l ./test0

echo "\033[33m*****************************************************\033[0m";
echo "\033[33m* test1                                             *\033[0m";
echo "\033[33m*****************************************************\033[0m";
./time -l ./test1
echo "\033[33m*****************\033[0m";
./run.sh ./time -l ./test1

echo "\033[33m*****************************************************\033[0m";
echo "\033[33m* test2                                             *\033[0m";
echo "\033[33m*****************************************************\033[0m";
./time -l ./test2
echo "\033[33m*****************\033[0m";
./run.sh ./time -l ./test2

echo "\033[33m*****************************************************\033[0m";
echo "\033[33m* test3                                             *\033[0m";
echo "\033[33m*****************************************************\033[0m";
./time -l ./test3
echo "\033[33m*****************\033[0m";
./run.sh ./time -l ./test3

echo "\033[33m*****************************************************\033[0m";
echo "\033[33m* test3b                                            *\033[0m";
echo "\033[33m*****************************************************\033[0m";
./time -l ./test3b
echo "\033[33m*****************\033[0m";
./run.sh ./time -l ./test3b

echo "\033[33m*****************************************************\033[0m";
echo "\033[33m* test4                                             *\033[0m";
echo "\033[33m*****************************************************\033[0m";
./time -l ./test4
echo "\033[33m*****************\033[0m";
./run.sh ./time -l ./test4

echo "\033[33m*****************************************************\033[0m";
echo "\033[33m* test5                                             *\033[0m";
echo "\033[33m*****************************************************\033[0m";
./time -l ./test5
echo "\033[33m*****************\033[0m";
./run.sh ./time -l ./test5

echo "\033[33m*****************************************************\033[0m";

cd .. && rm -rf $tmp_dir
